# Игра "Захват флага (Capture The Flag)"
## Описание проекта
Это графическая игра для двух игроков, выполненная в жанре платформера. Цель игры — захватить флаг противника и принести его на свою базу, преодолевая препятствия и атакуя противника. Игра поддерживает:

- Одновременную игру двух игроков с одной клавиатуры.
- Выбор способностей персонажа.
- Настраиваемые карты, задаваемые через собственный язык разметки.
- Возможность записи игрового процесса и его воспроизведения.

---

## Функциональные возможности

1. **Основной геймплей**
   - Два игрока, появляющихся на противоположных концах карты.
   - Игроки могут использовать рывок(раз в 7 секунд). Он позволяет быстро перемещаться, а при столкновении с противником может убить его. Если игроки совершают рывок в друг друга, победителем выйдет тот, кто совершил рывок раньше
   - Персонажи использовать выбранные способности.
   - Игроки умирают от препятствий или атак, но возрождаются через некоторое время на своей базе.

2. **Настраиваемые способности**
   - Перед началом игры каждый игрок выбирает две из пяти доступных способностей (например, заморозка соперника).

3. **Кастомизация карты**
   - Карты описываются в файлах, написанных на собственном языке разметки.
   - Файлы карт валидируются перед запуском.

4. **Запись игрового процесса**
   - Игра может записывать действия игроков в файл.
   - Есть возможность воспроизводить записанный файл.

---

## Требования

- Python 3.8+
- Библиотека **pygame**

Зависимости указаны в файле `requirements.txt`.

---

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone <URL_репозитория>
   cd <название_папки>
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Запустите игру:
   ```bash
   python capture_the_flag.py
   ```

---
## Конфигурационный файл
В конфигурационном файле можно указать пути к ресурсам игры. По умолчанию он выглядит так:
```config
assets = "assets"
maps = "maps"
replays = "replays"
```
В скобках указываются пути к папкам относительно конфигурационного файла. По умолчанию он находится в папке с основными файлами. Однако путь к нему можно изменить, запустив скрипт с дополнительным аргументом:
```bash
python capture_the_flag.py --path='paths.config'
```

---

## Формат файлов карт

Карты описываются в отдельном файле с использованием кастомного языка разметки. Пример файла:
### Пример:
```ctfmap
name:
    - en: Default map, ru: Стандартная карта
sizes:
    - x: 30, y: 20
platforms:
    - x: 1, y: 1, w: 30, h: 3
thorns:
    - x: 15, y: 4
    - x: 16, y: 4
flags:
    - color: blue, x: 3, y: 5
    - color: red, x: 28, y: 5
```
### Структура языка:
![lang_structure](https://drive.google.com/uc?id=1cDSYhsYOmkxnZAPp0Gm-iRt1ovIKk2Se)
### Параметры:
- name: объект с параметрами en и ru либо два объекта с разными языками
```ctfmap
name:
    - en: Some map name
    - ru: Название какой-то карты
```
- sizes: размеры всей карты (5 <= x <= 40 и 3 <= y <= 22). Также как и названия можно записать двумя объектами
```ctfmap
sizes:
    - x: 20
    - y: 15
```
- platforms: список платформ. Каждый объект - одна платформа. Обязательные параметры x и y, опциональные w и h (по умолчанию равны 1). Эти параметры должны быть > 0 и платформа с указанными размерами не должна выходить за границу карты
- thorns: список шипов. Каждый объект - один блок шипов. Обязательные параметры x и y, параметры ширины и высоты не предусмотрены. Обязательно должен располагаться над блоком платформы
- flags: список флагов. Обязательно должно быть два флага - 'red' и 'blue', остальные считаются невалидными. Флаг должен располагаться над блоком платформы. Обязательные параметры color, x, y, опциональных параметров нет.
```ctfmap
flags:
	- color: blue, x: 3, y: 5
	- color: red, x: 28, y: 5
```

Файл валидируется при загрузке. В случае ошибок запустить игру на карте из этого файла не выйдет.

---

## Геймплей

### Управление

- **Игрок 1:**
  - Движение: `W`, `A`, `D`
  - Рывок: `S`
  - Способности: `E`, `Q`

- **Игрок 2:**
  - Движение: Стрелки (`↑`, `←`, `→`)
  - Рывок: `↓`
  - Способности: `RSHIFT`, `RCTRL`

### Способности
В одном из экранов меню игроки перед стартом могут выбрать до двух способностей. Способности нельзя использовать постоянно, после использования они перезаряжаются и во время перезарядки не работают. Некоторые способности имеют ограниченный радиус действия, если противник находится вне радиуса, то эффекты не применяются, и перезарядка не начинается.

Перечень способностей:
- Заморозка: замедляет передвижение противника. Имеет ограниченный радиус и время действия.
- Бомба: убивает противника. Имеет ограниченный радиус, применяется мгновенно.
- Swap: меняет игроков местами. Имеет ограниченный радиус, применяется мгновенно.
- Притяжение: притягивает противника в сторону игрока в течение короткого промежутка времени.
- Fireball: игрок выпускает огненный шар, убивающий противника при столкновении с ним, и уничтожающийся при столкновении с платформой. Скорость шара зависит от скорости запустившего его игрока.

---

## Структура проекта

- `capture_the_flag.py` — основной файл игры.
- `recording/` — записи игр
- `assets/` — изображения, спрайты и другие ресурсы
- `maps/` - карты

---

## Авторы
- **Шапиро Максим**  
- **Суслов Андрей**
